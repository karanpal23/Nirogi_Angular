<div class="container pb-5 ">
	<div class="card shadow">
		<div class="card-body">
			<div class="row align-items-center justify-content-between">

				<div class="accordion" id="accordionExample">
					<div class="accordion-item" *ngIf="loginUserRole!='DISTUSER' && loginUserRole!='DIRECTOR'">
						<h2 class="accordion-header" id="headingOne">
							<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Add Single User</button>
						</h2>
						<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
							<div class="row">	

								<form [formGroup]="myAddUserForm" (ngSubmit)="onSubmit()" class="col-xs-12 col-sm-12 medical-form" >
									<h3 class="m-0">Add User</h3>
									<hr />
									<div class="row mt-4 align-items-center form-group ">
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
											<label class="fw-bold text-uppercase">Firstname <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('firstName').invalid && (myAddUserForm.get('firstName').dirty || myAddUserForm.get('firstName').touched)">
												<div *ngIf="myAddUserForm.get('firstName').errors.required" style="color: red; font-size: smaller; background-color: whitesmoke;  ">* First name is required.</div>
												<div *ngIf="myAddUserForm.get('firstName').errors.pattern" style="color: red; font-size: smaller; background-color: whitesmoke;  ">*should not contain any special characters like(@,#,$,%).</div>
											</div>
											<input matInput
											
											formControlName="firstName"
											name="firstname"
											type="text" placeholder="Enter Your Firstname" class="form-control py-2" required />   
											
										</div> 
										
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
											<label class="fw-bold text-uppercase">Lastname <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('lastName').invalid && (myAddUserForm.get('lastName').dirty || myAddUserForm.get('lastName').touched)">
												<div *ngIf="myAddUserForm.get('lastName').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* Last name is required.</div>
												<div *ngIf="myAddUserForm.get('lastName').errors.pattern" style="color: red; font-size: smaller; background-color: whitesmoke;  ">*should not contain any special  characters like(@,#,$,%).</div>
											</div>
											<input matInput  formControlName="lastName" name="lastname" type="text"  class="form-control py-2"
											placeholder="Enter Your lastname"  />
											
										</div>
									
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
											<label class="fw-bold text-uppercase">Username<span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('userName').invalid && (myAddUserForm.get('userName').dirty || myAddUserForm.get('userName').touched)">
												<div *ngIf="myAddUserForm.get('userName').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* User name is required.</div>
											</div>
											<input matInput
											formControlName="userName"
											name="username"
											type="text" 
											placeholder="Enter Your Username" 
											class="form-control py-2" required />
											
										</div>
										
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
											<label class="fw-bold text-uppercase">Password <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('passWord').invalid && (myAddUserForm.get('passWord').dirty || myAddUserForm.get('passWord').touched)">
												<div *ngIf="myAddUserForm.get('passWord').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* Password is required.</div>
											</div>
											<input  matInput
											formControlName="passWord"
											name="password"
											type="password" placeholder="Enter your Password" class="form-control py-2" required />
											
										</div>
									
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
											<label class="fw-bold text-uppercase">Designation <span class="required-field" style="color: red;">*</span></label>
											<input matInput
											formControlName="desigNation"
											name="designation"
											type="text" 
											placeholder="Enter Your designation"  
											class="form-control py-2" />
										</div>
										
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3 ">
											<label class="fw-bold text-uppercase">Role <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('userRole').invalid && (myAddUserForm.get('userRole').dirty || myAddUserForm.get('userRole').touched)">
												<div *ngIf="myAddUserForm.get('userRole').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* Role is required.</div>
											</div>
											<select id="Role" formControlName="userRole" class="form-control py-2">
												<option value="0">-- Select --</option>
												<option value="1">ADMIN</option>
												<option value="2">USER</option>
												<option value="3">DISTUSER</option>
											</select>
											
										</div>

										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3 ">
											<label class="fw-bold text-uppercase">MOBILE <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('mobile').invalid && (myAddUserForm.get('mobile').dirty || myAddUserForm.get('mobile').touched)">
												<div *ngIf="myAddUserForm.get('mobile').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* Mobile is required.</div>
												<div *ngIf="myAddUserForm.get('mobile').validator.length!=10" style="color: red; font-size: small; background-color: whitesmoke;  ">* Mobile number must be 10 digits.</div>
												<div *ngIf="myAddUserForm.get('mobile').errors.minLength" style="color: red; font-size: small; background-color: whitesmoke;  ">* Mobile number must be 10 digits.</div>
												<div *ngIf="myAddUserForm.get('mobile').errors.pattern" style="color: red; font-size: small; background-color: whitesmoke;  ">* Mobile number must be number.</div>
											</div>
											<input matInput
											formControlName="mobile"
											name="mobile"
											type="text" 
											id="mobile"
											placeholder="Enter Your Mobile Number"  class="form-control py-2"    />
											
											
											
										</div>
										<div class="col-xs-12 col-sm-6 col-lg-4 mb-3 ">
											<label class="fw-bold text-uppercase">EMAIL <span class="required-field" style="color: red;">*</span></label>
											<div *ngIf="myAddUserForm.get('email').invalid && (myAddUserForm.get('email').dirty || myAddUserForm.get('email').touched)">
												<div *ngIf="myAddUserForm.get('email').errors.required" style="color: red; font-size: small; background-color: whitesmoke;  ">* Email is required.</div>
												<div *ngIf="myAddUserForm.get('email').errors.email" style="color: red; font-size: small; background-color: whitesmoke;  ">* Invalid email address.</div>
											</div>
											<input matInput
											formControlName="email"
											name="Email"
											type="email" placeholder="Enter Your Email Address"  class="form-control py-2" />
											
										</div>
										
										<div class="col-xs-12 col-sm-6 col-lg-4  mb-3">
											<label class="fw-bold text-uppercase">District <span class="required-field" style="color: red;">*</span></label>
											<select  id="District"  class=" form-control py-2"  class="form-control"  >
												<option value="0">-- Select --</option>
												<option *ngFor="let dn of districtNameList" value={{dn.distId}} >  {{dn.distName}} </option>
											</select>
										</div>

										<div class="col-xs-12 col-sm-6 col-lg-4  mb-3">
											<label class="fw-bold text-uppercase">Facility Type <span class="required-field" style="color: red;">*</span></label>
											<select  id="FacilityType"  class=" form-control py-2"  class="form-control" (click)="showFacilities()" >
												<option value="0">-- Select --</option>
												<option *ngFor="let ft of facilityType"  > {{ft.facilityTypes}} </option>
											</select>
										</div>
									
										<div class="col-xs-12 col-sm-6 col-lg-4  mb-3">
											<label class="fw-bold text-uppercase">Facility <span class="required-field" style="color: red;">*</span></label>
											<select  id="Facility"  class="sel form-control py-2" class="form-control"  >
												<option *ng-typetosearch-tmp=""></option>
												<option *ngFor="let f of facilityListObj " > {{f.facility_name}}  </option>
												
											</select>
										<!-- <ng-select [items]="facilityNameList" appendTo="body" bindValue="facilityName" formControlName="facilityName" placeholder="Select Facility Name" ></ng-select>
											-->
											
										</div>
										
									</div>
									

									<button class="btn btn-primary mt-3" type="submit"  [disabled]="myAddUserForm.invalid">Submit</button>
									
								</form>
							</div>
						</div>
					</div>
				
			
					<div class="accordion-item" *ngIf="loginUserRole!='DISTUSER' && loginUserRole!='DIRECTOR'">
						<h2 class="accordion-header" id="headingHistory">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#history" aria-expanded="true" aria-controls="history">Add Users By Uploading a File</button>
						</h2>
						<div id="history" class="accordion-collapse collapse" aria-labelledby="heading" data-bs-parent="#accordionExample"  >
							<div class="row align-items-end form-group pt-1">	
								<div class="col-xs-12 col-sm-6 col-lg-2 mb-2">
									<label class="fw-bold label-details">Upload  file*</label> &nbsp;
									<input type="file" id="customFile" accept=".xlsx" (change)="selectFile($event)">
								</div>
							</div>
							<button class="btn btn-primary mt-3" type="submit" [disabled]="!selectedFiles" (click)="upload()"  >Submit</button>
						</div>
					</div>


					<div class="accordion-item">
						<h2 class="accordion-header" id="headingSysmetic">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#systemicExam" aria-expanded="true" aria-controls="physicalExam">Download Reports</button>
						</h2>
						<div id="systemicExam" class="accordion-collapse collapse" aria-labelledby="headingSysmetic" data-bs-parent="#accordionExample">
							<div class="row  align-items-center form-group pt-3 " >
								<p (click)="detailedReport()" id="reportText">Download Beneficiary Detailed Report </p>
							</div>
							<div class="row  align-items-center form-group " *ngIf="detailedReportSection==true" >
								<div class="col-xs-12 col-sm-6 col-md-2 ">
									<label for="">Date:- </label>
									<input  type="date" class="form-control" [(ngModel)]="this.Dates.from" id="fromDate" />
								</div>
								<div class="col-xs-12 col-sm-6 col-md-2" *ngIf="loginUserRole!='DISTUSER'">
									<label for="">Select District:- </label>
									<select  id="DistrictName"  class=" form-control py-2"  class="form-control"  >
										<option value="0">-- Select --</option>
										<option *ngFor="let dn of districtNameList" value={{dn.distId}} >  {{dn.distName}} </option>
									</select>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-2" *ngIf="loginUserRole=='DISTUSER' ">
									<label for="">Select District:- </label>
									<select  id="DistrictName"  class=" form-control py-2"  class="form-control"  >
										<option value="0">{{loginUserDist}}</option>
									</select>
								</div>
								
								<div class="col-xs-12 col-sm-4 col-lg-3 pt-3">
									<!-- <button  class="btn btn-success bg-success pt-2" (click)="onFirstGo()">Download</button> -->
									<button class="btn btn-success bg-success pt-2" (click)="downloadFile()" >Generate Report</button>
									
								</div>
							</div>

							<div class="row  align-items-center form-group pt-3 " >
								<p (click)="report()" id="reportText">Download Cumulative Detailed Report</p>
							</div>
							<div class="row  align-items-center form-group " *ngIf="reportSection==true" > 
									<div class="col-xs-12 col-sm-6 col-md-2 ">
										<label for="">From:- </label>
										<input  type="date" class="form-control" [(ngModel)]="this.Dates.from" id="fromDate" />
									</div>
									<div class="col-xs-12 col-sm-6 col-md-2">
										<label for="">To:- </label>
										<input  type="date" class="form-control" [(ngModel)]="this.Dates.to" id="ToDate" />
									</div>
									<div class="col-xs-12 col-sm-4 col-lg-3 pt-3">
										<button  class="btn btn-success bg-success pt-2" (click)="onGo()">Download</button>
									</div>
							</div>
						</div>
					</div>	

					<div class="accordion-item">
						<h2 class="accordion-header" id="headingChangePassword">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#ChangePassword" aria-expanded="true" aria-controls="headingChangePassword">Change Password</button>
						</h2>
						<div id="ChangePassword" class="accordion-collapse collapse" aria-labelledby="headingSysmetic" data-bs-parent="#accordionExample">
							<div class="row mt-4 align-items-center form-group" >
								
								<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
									<label class="fw-bold text-uppercase">Username</label>
									<input matInput
									[(ngModel)]="credential.username"
									name="username"
									type="text" 
									placeholder="Enter Your Username" 
									class="form-control py-2" required />
								</div>
								
								<div class="col-xs-12 col-sm-6 col-lg-4 mb-3">
									<label class="fw-bold text-uppercase">Password</label>
									<input  matInput
									[(ngModel)]="credential.password"
									name="password"
									type="text" placeholder="Enter your new Password" class="form-control py-2" required />
								</div>
								<div class="form-floating">
									<button class="btn btn-primary mt-3" (click)="changePassword()">Submit</button>
								</div>
						 	</div>

						</div>
					</div>	

				</div>
			</div>
		</div>
			
	</div>
	<div class="row" *ngIf="DownloadProgLoading==true">
		<div id="loader">
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="loading"></div>
		</div>
	</div>
	
		
</div>

	
	
	
<footer>
	<div class="container-fluid">
		<div class="row align-items-center">
			<div class="col-xs-12 col-sm-8 col-md-9">
				<p>Designed by <a href="#"> Department of Information Technology Electronics & Communication, Haryana</a></p>
			</div>
			<div class="col-xs-12 col-sm-4 col-md-3 text-end ps-0">
				<div class="d-flex justify-content-end"><span>Visitor Counts</span> <strong class="counter-list mx-2">2827299</strong></div>		
			</div>
		</div>
	</div>
</footer>
	